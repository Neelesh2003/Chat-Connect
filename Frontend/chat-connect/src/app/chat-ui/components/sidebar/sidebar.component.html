<div class="sidebar bg-dark text-white p-3" style="width: 300px;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5>{{ currentUser?.username }}</h5>
    <button class="btn btn-outline-light btn-sm" (click)="onLogout()">Logout</button>
  </div>

  <div class="d-flex mb-3">
    <button class="btn flex-grow-1" [class.active]="activeTab === 'users'" (click)="switchTab('users')">
      Users
    </button>
    <button class="btn flex-grow-1" [class.active]="activeTab === 'groups'" (click)="switchTab('groups')">
      Groups
    </button>
  </div>

  <div *ngIf="activeTab === 'users'" class="mb-3">
    <input type="text" class="form-control" placeholder="Search users..." [(ngModel)]="searchTerm" (input)="onSearch()">
  </div>

  <div *ngIf="activeTab === 'users'" class="user-list">
    <div *ngFor="let user of users" class="d-flex align-items-center p-2 mb-2 bg-secondary rounded" (click)="onSelectUser(user)" style="cursor: pointer;">
      <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-2" style="width: 40px; height: 40px;">
        {{ user.username[0].toUpperCase() }}
      </div>
      <div>
        <div>{{ user.username }}</div>
        <small class="text-muted" *ngIf="user.isOnline">Online</small>
      </div>
    </div>
  </div>

  <div *ngIf="activeTab === 'groups'" class="group-list mb-3">
    <div *ngFor="let group of groups" class="d-flex align-items-center p-2 mb-2 bg-secondary rounded" (click)="onSelectGroup(group)" style="cursor: pointer;">
      <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center me-2" style="width: 40px; height: 40px;">
        ðŸ‘¥
      </div>
      <div>{{ group.name }}</div>
    </div>
  </div>

  <div *ngIf="activeTab === 'groups'" class="create-group">
    <h6>Create New Group</h6>
    <input type="text" class="form-control mb-2" placeholder="Group name" [(ngModel)]="newGroupName">
    <div class="mb-2">
      <label>Select members:</label>
      <div *ngFor="let user of users" class="form-check">
        <input type="checkbox" class="form-check-input" (change)="addMemberToGroup(user.id)">
        <label class="form-check-label">{{ user.username }}</label>
      </div>
    </div>
    <button class="btn btn-success w-100" (click)="createGroup()" [disabled]="!newGroupName.trim()">Create</button>
  </div>
</div>