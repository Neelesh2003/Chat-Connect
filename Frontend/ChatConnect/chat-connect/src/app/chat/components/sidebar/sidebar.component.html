<div class="d-flex flex-column h-100 bg-dark border-end" style="width: 320px;">
  <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
    <h5 class="mb-0 text-white">Hi, {{ user }}</h5>
    <button class="btn btn-danger btn-sm" (click)="onLogout()" aria-label="Logout">Logout</button>
  </div>
  <ul class="nav nav-pills nav-fill p-2 border-bottom">
    <li class="nav-item">
      <a class="nav-link" [class.active]="activeTab === 'users'" (click)="switchTab('users')">Users</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [class.active]="activeTab === 'groups'" (click)="switchTab('groups')">Groups</a>
    </li>
  </ul>
  <div *ngIf="activeTab === 'users'" class="p-2 border-bottom">
    <div class="input-group">
      <input class="form-control bg-secondary text-white" placeholder="Search user" [(ngModel)]="searchUser" (ngModelChange)="onInputChange($event)" aria-label="Search users">
      <button class="btn btn-primary" type="button" (click)="onSearch()">Search</button>
    </div>
  </div>
  <div *ngIf="activeTab === 'groups'" class="p-2 border-bottom d-flex justify-content-between align-items-center">
    <h6 class="mb-0 text-white">Your Groups</h6>
    <button class="btn btn-success btn-sm" (click)="createGroup.emit()" aria-label="Create Group">+ New Group</button>
  </div>
  <div class="flex-grow-1 overflow-auto p-2">
    <div *ngIf="activeTab === 'users'" class="list-group">
      <a *ngFor="let u of users" class="list-group-item list-group-item-action bg-secondary text-white border-0 mb-1 rounded" 
         [class.active]="selectedUser?.id === u.id" (click)="selectUser.emit(u)"
         [attr.aria-label]="'Chat with ' + u.username">
        <div class="d-flex align-items-center">
          <span class="position-relative me-2">
            <span class="badge rounded-circle bg-light" style="width: 10px; height: 10px;"
                   [ngClass]="{'bg-success': onlineUsers.get(u.id), 'bg-secondary': !onlineUsers.get(u.id)}"></span>
          </span>
          {{ u.username }}
        </div>
      </a>
    </div>
    <div *ngIf="activeTab === 'groups'" class="list-group">
      <a *ngFor="let g of groups" class="list-group-item list-group-item-action bg-secondary text-white border-0 mb-1 rounded" 
         [class.active]="selectedGroup?.id === g.id" (click)="selectGroup.emit(g)"
         [attr.aria-label]="'Chat in group ' + g.name">
        {{ g.name }}
      </a>
    </div>
  </div>
</div>